(this.webpackJsonpdemo_setup=this.webpackJsonpdemo_setup||[]).push([[0],{20:function(e,t){},31:function(e,t,n){},32:function(e,t,n){"use strict";n.r(t);var r=n(0),s=n(17),c=n.n(s),a=n(10),u=n(8),o=n(2),i=n(1),j=function(){return Object(i.jsx)("div",{children:"Home"})},b=n(4),l=n(9),p="http://localhost:4000/api/2204-FTB-MT-WEB-PT",d=function(){var e=Object(l.a)(Object(b.a)().mark((function e(t){var n,r,s,c,a,u=arguments;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]?u[1]:"GET",r=u.length>2?u[2]:void 0,s=u.length>3?u[3]:void 0,c=!1,e.prev=4,e.next=7,fetch(p+t,h(O(n,s),r));case 7:return a=e.sent,e.next=10,a.json();case 10:if(!(c=e.sent).error){e.next=13;break}throw c.error;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),console.log(e.t0);case 18:return e.abrupt("return",c);case 19:case"end":return e.stop()}}),e,null,[[4,15]])})));return function(t){return e.apply(this,arguments)}}(),O=function(e,t){return{method:e.toUpperCase(),headers:{"Conten-Type":"application/json"},body:JSON.stringify(t)}},h=function(e,t){return t?Object.assign(e,{headers:Object.assign(e.headers,{Authorization:"Bearer ".concat(t)})}):e},f=function(){var e=Object(l.a)(Object(b.a)().mark((function e(t){var n;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d("/posts","GET",t);case 2:if((n=e.sent)&&n.data){e.next=5;break}return e.abrupt("return",[]);case 5:return e.abrupt("return",n.data.posts||[]);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(l.a)(Object(b.a)().mark((function e(t,n){var r;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d("/guests/login","POST",null,{guest:{username:t,password:n}});case 2:return r=e.sent,e.abrupt("return",{user:r.data.guest,token:r.data.token});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),v=function(){var e=Object(l.a)(Object(b.a)().mark((function e(t,n){var r;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d("/guests/register","POST",null,{guest:{username:t,password:n}});case 2:return r=e.sent,e.abrupt("return",{user:r.data.guest,token:r.data.token});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),m=function(e){var t=e.user,n=e.setUser,s=e.token,c=e.setToken,a=Object(r.useState)(""),o=Object(u.a)(a,2),j=o[0],p=o[1],d=Object(r.useState)(""),O=Object(u.a)(d,2),h=O[0],f=O[1],m=Object(r.useState)(!1),g=Object(u.a)(m,2),k=g[0],w=g[1],P=function(){var e=Object(l.a)(Object(b.a)().mark((function e(t){var r,s,a,u,o,i;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!k){e.next=11;break}return e.next=4,v(j,h);case 4:r=e.sent,s=r.user,a=r.token,n(s),c(a),e.next=18;break;case 11:return e.next=13,x(j,h);case 13:u=e.sent,o=u.user,i=u.token,n(o),c(i);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(i.jsx)(i.Fragment,{children:t&&s?Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("h1",{children:"User Profile"}),Object(i.jsxs)("p",{children:["Hi ",t.username," is logged in"]}),Object(i.jsx)("button",{onClick:function(){n(!1),c("")},children:"Logout"})]}):Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("h1",{children:k?"Registration":"Login"}),Object(i.jsxs)("form",{onSubmit:P,children:[Object(i.jsx)("input",{onChange:function(e){return p(e.target.value)},required:!0,name:"username",type:"text",placeholder:"username",value:j}),Object(i.jsx)("input",{onChange:function(e){return f(e.target.value)},required:!0,name:"password",type:"password",placeholder:"password",value:h}),Object(i.jsx)("button",{type:"submit",children:"Submit"})]}),Object(i.jsx)("button",{onClick:function(){w(!k)},children:"Register/Login"})]})})},g=function(e){var t=e.user,n=e.token,s=e.posts,c=e.setPosts,a=(e.featuredPost,e.setFeaturedPost),j=Object(r.useState)(""),p=Object(u.a)(j,2),d=p[0],O=p[1],h=Object(o.e)();Object(r.useEffect)((function(){return Object(l.a)(Object(b.a)().mark((function e(){return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=c,e.next=3,f(n);case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))()}),[]);return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("h1",{children:"Posts"}),Object(i.jsx)("input",{onChange:function(e){return O(e.target.value)},type:"text",name:"search",placeholder:"search"}),Object(i.jsx)("form",{children:Object(i.jsx)("button",{onClick:function(e){handleSubmit(e)},children:"Create Post"})}),Object(i.jsx)("ul",{children:s.filter((function(e){return function(e){return"".concat(e.location," ").concat(e.description).toLowerCase().includes(d,toLowerCase())}(e)})).map((function(e){return Object(i.jsxs)("li",{onClick:function(r){!function(e,r){t&&n?(a(r),h.push("/posts/".concat(r.id))):alert("not logged in")}(0,e)},className:"post-body",children:[Object(i.jsx)("div",{children:e.location}),Object(i.jsx)("div",{children:e.description})]},e.id)}))})]})},k=n(20),w=n.n(k),P=function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),n=t[0],s=t[1],c=Object(r.useState)(""),b=Object(u.a)(c,2),l=b[0],p=b[1],d=Object(r.useState)(!1),O=Object(u.a)(d,2),h=(O[0],O[1],Object(r.useState)(!1)),f=Object(u.a)(h,2),x=f[0],v=f[1],k=Object(r.useState)(""),P=Object(u.a)(k,2),C=P[0],S=P[1];return Object(i.jsxs)("main",{children:[Object(i.jsxs)("nav",{children:[Object(i.jsx)(a.b,{exact:!0,to:"/",className:"navlink",activeClassName:"active",children:"Home"}),Object(i.jsx)(a.b,{to:"/posts",className:"navlink",activeClassName:"active",children:"Posts"}),Object(i.jsx)(a.b,{to:"/login",className:"navlink",activeClassName:"active",children:"Profile"})]}),Object(i.jsx)(o.a,{exact:!0,path:"/",children:Object(i.jsx)(j,{})}),Object(i.jsxs)(o.a,{path:"/posts",children:[Object(i.jsx)(o.a,{path:"/posts/:postId",children:x&&C&&Object(i.jsx)(w.a,{user:x,token:C,featuredPost:l,setFeaturedPost:p})}),Object(i.jsx)(g,{user:x,token:C,featuredPost:l,setFeaturedPost:p,posts:n,setPosts:s})]}),Object(i.jsx)(o.a,{path:"/login",children:Object(i.jsx)(m,{user:x,setUser:v,token:C,setToken:S})})]})};n(31);c.a.render(Object(i.jsx)(a.a,{children:Object(i.jsx)(P,{})}),document.getElementById("app"))}},[[32,1,2]]]);
//# sourceMappingURL=main.9fa3525e.chunk.js.map